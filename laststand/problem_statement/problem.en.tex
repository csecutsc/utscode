\problemname{Slaying the Kayran}
\illustration{.5}{hydra}{\href{https://www.goodfreephotos.com/albums/vector-images/hydra-silhouette-vector-clipart.png}{GoodFreePhotos.com}, public domain}

\noindent You managed to get through the the Mist Dragon's domain unharmed. You eventually stumble upon a small village
called Flotsam. You notice that all the locals are on edge, so you head over to the pub to find out whats going on. You overhear that
a monstrosity named the Kayran has been plaguing Flotsam's harbor, forcing away trade ships and cutting Flotsam off from the world.
As a witcher, you begrudgingly accept the contract on the Kayran. You oil your weapons, clear your mind, and make your way
towards the shoreline.\\

\noindent The Kayran immediately leaps out and attacks you, a gargantuan hydra-like monstrosity the size of a large ship. Luckily, you manage
to parry the attack just in time, avoiding fatal damage. Suddenly the Kayran loses a few heads..? But that can't be right,
all the lore books and bestiaries have taught you that hydras only ever grow heads when they are attacked. Before you can finish
your thought, the Kayran attacks again and you dodge roll away to safety. This time, however, the Kayran has grew some new heads.
Absurd! This beast does not follow any conventional rules. You decide its time to change your tactics, deciding to take the
brunt of the Kayran's next attck so you can study its patterns. \\

\noindent After studying the behavior of the beast, you conclude that the Kayran is unstable, it seems to grow or decrease its
head count almost at random. But one thing you do notice is that there is a one-to-one correspondance to the number of heads
the Kayran has before and after you decide to attack (i.e. the Kayran will never enter a state where it has $x$ heads and suddenly
go to either $y$ heads or $z$ heads where $y \neq z$). You chuckle, finally figuring out the creature.\\

\noindent Unforunately you're still too injured to fight at full strength, you only have a limited amount of health points left
and for each turn where you decide to defend yourself from the Kayran's attack you lose 1 health point. Or, you can choose to
attack the Kayran on any given turn and take the brunt of the Kayran's counter-attack. In this case, you take damage equivalent to the
current number of heads that the Kayran has. Remember that the Kayran always follows a set of rules when determining it's head
count after any action you perform (for example, if the Kayran has 4 heads and you defend, if a rule exists that 4 -> 2, then two heads
fall off after combat. If you attack and take a head, and a rule exists that 3 -> 5, then the Kayran will grow to five total heads
after your attack). In the cases where a rule is not specified for a certain head cout, you may assume the Kayran will only lose 1
head if you attack. Furthermore, the Kayran will keep on attacking you on each turn until it has reached 0 heads and has been defeated,
or you have reached 0 or less health and have died. \\

\noindent You must choose quickly if it is possible to defeat the Kayran or to retreat to Flotsam and face the Kayran
some other day.\\

\section*{Input}

The first line of input conists of three integers, $1 \leq N, H, R \leq 5000$, representing the current number of heads the
Kayran has, the current amount of health you have, and the amount of rules that the Kayran follows with respect to its
head count. Following this will be $R$ lines of input consisting two integers $1 \leq n_i , n_j \leq 5000$ representing one
rule the Kayran must always follows when determining it's head count. You may assume that Niebla's head count will never
exceed 5000. \\

\section*{Output}
Should it be impossible to defeat the Kayran, you should print "retreat", otherwise, print the minimum sequence of
moves required to defeat the Kayran. \\
